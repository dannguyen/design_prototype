{% include 'partials/head.html' %}

<!-- SEARCH BAR -->
{% include 'partials/search_bar.html' %}

<div class="row">

    <!-- BEGIN LEFT CONTENT COLUMN -->
    <div class="col-md-10 col-md-offset-1">
        <div class="row">
            <div class="page-identifier col-md-10">
                <h1>{{ object_list[1]['vendorName'] }}</h1>
            </div>
            <div class="page-type col-md-2">Contract</div>
        </div>

        <!-- SUMMARY -->
        <div class="row">
            <div class="subhead">
                <h3>Summary</h3>
            </div>
        </div>

        <div class="wrapper">
            <div class="container inner">
                <p>{{ object_list[1]['vendorName'] }} recieved this ${{ object_list[1]['obligatedAmount'] }} contract from {{ object_list[1]['contractingOfficeAgencyID'] }} for {{ object_list[1]['productOrServiceCode'] }}.</p>
            </div>
        </div>

        <!-- INVOLVED PARTIES AND RECIPIENT DESCRIPITON -->
            <div class="row">
                <div class="col-md-6">
                    <div class="subhead left">
                        <h3>Contract requestor information</h3>
                    </div>
                    <table class="left">
                        <tr><td>Major funding agency</td><td>{{ object_list[1]['maj_fund_agency_cat'] }}</td></tr>
                        <tr><td>Requesting agency</td><td>{{ object_list[1]['contractingOfficeAgencyID'] }}</td></tr>
                        <tr><td>Requesting office</td><td>{{ object_list[1]['fundingRequestingOfficeID'] }}</td></tr>
                        <tr><td>Funded by foreign entity</td><td>{{ object_list[1]['fundedByForeignEntity'] }}</td></tr>
                        <tr><td>Humanitarian or peacekeeping operation</td><td>{{ object_list[1]['contingencyHumanitarianPeacekeepingOperation'] }}</td></tr>
                    </table>
                </div>
                <div class="col-md-6">
                    <div class="subhead">
                        <h3>TKTK</h3>
                    </div>
                    
                </div>
            </div>

            <!-- CONTRACT DESCRIPTION -->
            <div class="row">
                <div class="col-md-12">
                    <div class="subhead">
                        <h3>Contract description</h3>
                    </div>
                    <div class="container inner">
                        <p>{{ object_list[1]['descriptionOfContractRequirement'] }}</p>
                    </div>
                </div>
            </div>


            <!-- CONTRACT TIMELINE -->
            <div class="row">
                <div class="col-md-12">
                    <div class="subhead left">
                        <h3>Contract timeline</h3>
                    </div>
                    <div class="col-md-6">
                        <table>
                            <tr><td>Signed date</td><td>{{ object_list[1]['signedDate'] }}</td></tr>
                            <tr><td>Effective date</td><td>{{ object_list[1]['effectiveDate'] }}</td></tr>
                            <tr><td>Current completion date</td><td>{{ object_list[1]['currentCompletionDate'] }}</td></tr>
                            <tr><td>Ultimate completion date</td><td>{{ object_list[1]['ultimateCompletionDate'] }}</td></tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <!-- D3 GOES HERE -->
                        <!-- <div id="calendar"></div> -->
                    </div>
                </div>
            </div>

            

            

            <!-- CONTRACT PERFORMANCE LOCATION -->
            <div class="row">
                <div class="subhead col-md-10">
                    <h3>Contract performance location</h3>
                </div>
                <div class="option-wrapper col-md-2">
                        <div class="option">embed</div>
                        <div class="option">export</div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                        <table>
                            <tr><td>City</td><td>TKTK</td></tr>
                            <tr><td>State / Country</td><td>{{ object_list[1]['popStateCode'] }} / {{ object_list[1]['placeOfPerformanceCountryCode'] }}</td></tr>
                            <tr><td>ZIP code</td><td>{{ object_list[1]['placeOfPerformanceZIPCode'] }}</td></tr>
                            <tr><td>Congressional district</td><td>{{ object_list[1]['popStateCode'] }}{{ object_list[1]['placeOfPerformanceCongressionalDistrict'] }}</td></tr>
                        </table>
                    </div>
                <!-- MAP? -->
                <div id="detail" class="col-md-8"></div>
            </div>

            <!-- INVOLVED PARTIES AND RECIPIENT DESCRIPITON -->
            <div class="row">
                <div class="col-md-6">
                    <div class="subhead left">
                        <h3>Vendor information</h3>
                    </div>
                    <table>
                        <tr><td>Contract recipient</td><td>{{ object_list[1]['vendorName'] }} </td></tr>
                        <tr><td>Recipient alt. name</td><td>{{ object_list[1]['vendorAlternateName'] }}</td></tr>
                        <tr><td>Address</td><td>{{ object_list[1]['streetAddress'] }} {{ object_list[1]['city'] }}, {{ object_list[1]['state'] }} {{ object_list[1]['ZIPCode'] }}</td></tr>
                        <tr><td>Congressional district</td><td>{{ object_list[1]['state'] }}{{ object_list[1]['congressionalDistrict'] }}</td></tr>
                        <tr><td>Business size</td><td>{{ object_list[1]['contractingOfficerBusinessSizeDetermination'] }}</td></tr>
                        <tr><td>Number of employees</td><td>{{ object_list[1]['numberOfEmployees'] }}</td></tr>
                        <tr><td>Annual revenue</td><td>${{ object_list[1]['annualRevenue'] }}</td></tr>
                        <tr><td>Site code / alternate site code</td><td>{{ object_list[1]['vendorSiteCode'] }} / {{ object_list[1]['vendorAlternateSiteCode'] }}</td></tr>
                        <tr><td>DUNS number</td><td>{{ object_list[1]['DUNSNumber'] }}</td></tr>
                        
                    </table>
                </div>
                <div class="col-md-6">
                    <div class="subhead">
                        <h3>Company network diagram</h3>
                    </div>

                </div>
            </div>
            

            <div class="row">
            <div class="subhead col-md-10">
                <h3>Contract identifiers</h3>
            </div>
            <div class="option-wrapper col-md-2">
                    <div class="option">embed</div>
                    <div class="option">export</div>
            </div>

        </div>
    {{ object_list[1] }}
    </div>
    <!-- END LEFT CONTENT COLUMN -->

</div> <!-- END ROW -->

<!-- GEOCODE SCRIPT -->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

            var geocoder = new google.maps.Geocoder();
            var address = "{{ object_list[1]['streetAddress'] }}, {{ object_list[1]['city'] }}, {{ object_list[1]['state']}}";

            geocoder.geocode( {'address': address}, function(results, status) {

                var x = results[0].geometry.location.lat();
                var y = results[0].geometry.location.lng();

                var map = L.map('detail').setView([x, y], 10);
                var Hydda_Full = L.tileLayer('http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png', {
                    attribution: 'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                });
                var dataLayer = L.geoJson(data, {
                    onEachFeature: function(feature, layer) {
                        layer.bindPopup(
                            '<a href="' + feature.properties.id + '/">' +
                                feature.properties.Site_Name +
                            '</a>'
                        );
                    }
                });
                map.addLayer(Hydda_Full);
                var marker = L.marker([x, y]).addTo(map);
                }); 
            
        </script>

<!-- END GEOCODE SCRIPT -->

{% include 'partials/foot.html' %}